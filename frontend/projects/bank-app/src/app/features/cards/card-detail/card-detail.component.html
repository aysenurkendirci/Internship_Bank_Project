<div class="flex flex-col h-full bg-slate-50/20">
  <header class="h-20 bg-white border-b border-slate-100 flex items-center justify-between px-8 mb-6">
    <div class="flex items-center gap-4">
      <button routerLink="/dashboard" class="p-2 hover:bg-slate-50 rounded-full transition-all active:scale-90">
        <span class="material-symbols-outlined text-slate-400">arrow_back</span>
      </button>

      <div>
        <h2 class="text-xl font-black text-slate-800 tracking-tight">Kart Detayları</h2>
        <!-- ✅ ID gösterme kısmı istersen sonra kaldırırız -->
        <p class="text-xs text-slate-400 font-bold">Card ID: {{ id }}</p>
      </div>
    </div>

    <div class="flex items-center gap-6">
      <div class="relative hidden md:block">
        <span class="material-symbols-outlined text-slate-400 absolute left-3 top-1/2 -translate-y-1/2 text-xl">search</span>
        <input
          class="bg-slate-100 border-none rounded-2xl pl-10 pr-4 py-2 text-sm w-64 outline-none focus:ring-2 focus:ring-blue-500/20"
          placeholder="İşlemlerde ara..."
          type="text"
        />
      </div>
      <button class="material-symbols-outlined text-slate-400 hover:text-blue-600 transition-colors">notifications</button>
      <div class="w-10 h-10 rounded-full border border-slate-200 bg-slate-100"></div>
    </div>
  </header>

  <div class="flex-1 overflow-y-auto px-8 pb-8 custom-scrollbar">
    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-10">

      <!-- LEFT -->
      <div class="lg:col-span-5 space-y-8">

        <!-- Card visual -->
        <div class="aspect-[1.58/1] w-full rounded-[40px] bg-slate-900 p-10 text-white shadow-2xl relative overflow-hidden">
          <div class="absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -mr-16 -mt-16 blur-3xl"></div>

          <div class="flex justify-between items-start z-10 relative">
            <div class="space-y-1">
              <p class="text-[10px] uppercase tracking-[0.2em] text-slate-400 font-black">BAKİYE</p>

              <!-- ✅ Pipe yok: sayı string ise direkt basar -->
              <p class="text-4xl font-black tracking-tighter">{{ card?.balance ?? '-' }}</p>
            </div>

            <span class="material-symbols-outlined opacity-40">
              {{ card?.settings?.contactless ? 'contactless' : 'credit_card' }}
            </span>
          </div>

          <div class="mt-auto z-10 relative">
            <p class="text-2xl tracking-[0.3em] font-bold text-slate-200 mb-8 mt-12">
              {{ card?.cardNoMasked || '**** **** **** ****' }}
            </p>

            <div class="flex justify-between items-end">
              <div>
                <p class="text-[9px] uppercase text-slate-500 font-black mb-1">KART TÜRÜ</p>
                <p class="text-sm font-black tracking-widest uppercase">
                  {{ card?.cardType || '-' }} • {{ card?.isVirtual ? 'Sanal' : 'Fiziksel' }}
                </p>
              </div>

              <div class="flex gap-1.5 opacity-80">
                <div class="w-8 h-5 bg-red-500 rounded-sm"></div>
                <div class="w-8 h-5 bg-orange-400 rounded-sm -ml-4"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="grid grid-cols-4 gap-4">
          <button class="flex flex-col items-center gap-3 group">
            <div class="w-full aspect-square rounded-3xl bg-white border border-slate-100 flex items-center justify-center text-slate-600 group-hover:bg-blue-600 group-hover:text-white transition-all shadow-sm">
              <span class="material-symbols-outlined">lock</span>
            </div>
            <span class="text-[10px] font-black text-slate-400 uppercase">Dondellen</span>
          </button>

          <button class="flex flex-col items-center gap-3 group">
            <div class="w-full aspect-square rounded-3xl bg-white border border-slate-100 flex items-center justify-center text-slate-600 group-hover:bg-blue-600 group-hover:text-white transition-all shadow-sm">
              <span class="material-symbols-outlined">pin</span>
            </div>
            <span class="text-[10px] font-black text-slate-400 uppercase">PIN</span>
          </button>

          <button class="flex flex-col items-center gap-3 group">
            <div class="w-full aspect-square rounded-3xl bg-white border border-slate-100 flex items-center justify-center text-slate-600 group-hover:bg-blue-600 group-hover:text-white transition-all shadow-sm">
              <span class="material-symbols-outlined">tune</span>
            </div>
            <span class="text-[10px] font-black text-slate-400 uppercase">Limit</span>
          </button>

          <button class="flex flex-col items-center gap-3 group">
            <div class="w-full aspect-square rounded-3xl bg-white border border-slate-100 flex items-center justify-center text-slate-600 group-hover:bg-blue-600 group-hover:text-white transition-all shadow-sm">
              <span class="material-symbols-outlined">add_card</span>
            </div>
            <span class="text-[10px] font-black text-slate-400 uppercase">Yükle</span>
          </button>
        </div>

        <!-- Limits mini -->
        <div class="bg-white rounded-[32px] border border-slate-50 shadow-sm p-6">
          <p class="text-sm font-black text-slate-900 mb-4">Limitler</p>
          <div class="grid grid-cols-2 gap-4">
            <div class="p-4 rounded-2xl bg-slate-50 border border-slate-100">
              <p class="text-[10px] uppercase tracking-wider text-slate-400 font-black">Günlük</p>
              <p class="text-lg font-black text-slate-900">{{ card?.limits?.dailyLimit ?? '-' }}</p>
            </div>
            <div class="p-4 rounded-2xl bg-slate-50 border border-slate-100">
              <p class="text-[10px] uppercase tracking-wider text-slate-400 font-black">Aylık</p>
              <p class="text-lg font-black text-slate-900">{{ card?.limits?.monthlyLimit ?? '-' }}</p>
            </div>
          </div>
        </div>

      </div>
      <div class="lg:col-span-7">
        <div class="flex items-center justify-between mb-6 px-2">
          <h3 class="text-xl font-black text-slate-900">Hesap Hareketleri</h3>
          <button class="text-blue-600 font-bold text-sm hover:underline">Tümünü Gör</button>
        </div>

        <div class="space-y-4">
          <div *ngIf="!txs.length" class="p-8 text-center bg-white rounded-[32px] border border-slate-50 shadow-sm">
            <p class="text-sm font-black text-slate-700">Bu karta ait işlem bulunamadı.</p>
            <p class="text-xs text-slate-400 font-bold mt-1">Yeni işlemler burada görünecek.</p>
          </div>

          <div *ngIf="txs.length" class="bg-white rounded-[32px] border border-slate-50 shadow-sm overflow-hidden">
            <div *ngFor="let t of txs" class="p-5 flex items-center justify-between border-b border-slate-100 last:border-b-0">
              <div class="flex items-center gap-4">
                <div
                  class="w-12 h-12 rounded-2xl flex items-center justify-center"
                  [ngClass]="t.direction === 'IN' ? 'bg-emerald-50 text-emerald-500' : 'bg-rose-50 text-rose-500'"
                >
                  <span class="material-symbols-outlined">
                    {{ t.direction === 'IN' ? 'north_east' : 'south_west' }}
                  </span>
                </div>

                <div>
                  <!-- ✅ title yok -> category -->
                  <p class="font-black text-slate-900">{{ t.category }}</p>
                  <p class="text-[10px] text-slate-400 font-bold uppercase">
                    {{ t.createdAt }}
                  </p>
                </div>
              </div>

              <p
                class="font-black"
                [ngClass]="t.direction === 'IN' ? 'text-emerald-600' : 'text-rose-600'"
              >
                {{ t.direction === 'IN' ? '+' : '-' }}{{ t.amount }}
              </p>
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>
</div>
